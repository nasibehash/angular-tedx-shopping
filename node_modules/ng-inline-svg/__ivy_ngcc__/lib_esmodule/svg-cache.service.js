import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from './inline-svg.config';
import * as ɵngcc3 from '@angular/common/http';
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
import { APP_BASE_HREF, PlatformLocation } from '@angular/common';
import { HttpBackend, HttpClient } from '@angular/common/http';
import { Inject, Injectable, Optional, RendererFactory2 } from '@angular/core';
import { of } from 'rxjs';
import { finalize, map, share } from 'rxjs/operators';
import { InlineSVGConfig } from './inline-svg.config';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "./inline-svg.config";
import * as i3 from "@angular/common/http";
var SVGCacheService = (function () {
    function SVGCacheService(_appBase, _location, _config, httpClient, httpBackend, rendererFactory) {
        this._appBase = _appBase;
        this._location = _location;
        this._config = _config;
        this._http = _config && !_config.bypassHttpClientInterceptorChain
            ? httpClient
            : new HttpClient(httpBackend);
        this._renderer = rendererFactory.createRenderer(null, null);
        this.setBaseUrl();
        if (!SVGCacheService_1._cache) {
            SVGCacheService_1._cache = new Map();
        }
        if (!SVGCacheService_1._inProgressReqs) {
            SVGCacheService_1._inProgressReqs = new Map();
        }
    }
    SVGCacheService_1 = SVGCacheService;
    SVGCacheService.prototype.getSVG = function (url, resolveSVGUrl, cache) {
        var _this = this;
        if (cache === void 0) { cache = true; }
        var svgUrl = (resolveSVGUrl
            ? this.getAbsoluteUrl(url)
            : url).replace(/#.+$/, '');
        if (cache && SVGCacheService_1._cache.has(svgUrl)) {
            return of(this._cloneSVG(SVGCacheService_1._cache.get(svgUrl)));
        }
        if (SVGCacheService_1._inProgressReqs.has(svgUrl)) {
            return SVGCacheService_1._inProgressReqs.get(svgUrl);
        }
        var req = this._http.get(svgUrl, { responseType: 'text' })
            .pipe(finalize(function () {
            SVGCacheService_1._inProgressReqs.delete(svgUrl);
        }), share(), map(function (svgText) {
            var svgEl = _this._svgElementFromString(svgText);
            SVGCacheService_1._cache.set(svgUrl, svgEl);
            return _this._cloneSVG(svgEl);
        }));
        SVGCacheService_1._inProgressReqs.set(svgUrl, req);
        return req;
    };
    SVGCacheService.prototype.setBaseUrl = function () {
        if (this._config) {
            this._baseUrl = this._config.baseUrl;
        }
        else if (this._appBase !== null) {
            this._baseUrl = this._appBase;
        }
        else if (this._location !== null) {
            this._baseUrl = this._location.getBaseHrefFromDOM();
        }
    };
    SVGCacheService.prototype.getAbsoluteUrl = function (url) {
        if (this._baseUrl && !/^https?:\/\//i.test(url)) {
            url = this._baseUrl + url;
            if (url.indexOf('//') === 0) {
                url = url.substring(1);
            }
        }
        var base = this._renderer.createElement('BASE');
        base.href = url;
        return base.href;
    };
    SVGCacheService.prototype._svgElementFromString = function (str) {
        var div = this._renderer.createElement('DIV');
        div.innerHTML = str;
        var svg = div.querySelector('svg');
        if (!svg) {
            throw new Error('No SVG found in loaded contents');
        }
        return svg;
    };
    SVGCacheService.prototype._cloneSVG = function (svg) {
        return svg.cloneNode(true);
    };
    var SVGCacheService_1;
    SVGCacheService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function SVGCacheService_Factory() { return new SVGCacheService(i0.ɵɵinject(i1.APP_BASE_HREF, 8), i0.ɵɵinject(i1.PlatformLocation, 8), i0.ɵɵinject(i2.InlineSVGConfig, 8), i0.ɵɵinject(i3.HttpClient), i0.ɵɵinject(i3.HttpBackend), i0.ɵɵinject(i0.RendererFactory2)); }, token: SVGCacheService, providedIn: "root" });
    SVGCacheService = SVGCacheService_1 = __decorate([ __param(0, Optional()), __param(0, Inject(APP_BASE_HREF)),
        __param(1, Optional()),
        __param(2, Optional()),
        __metadata("design:paramtypes", [String, PlatformLocation,
            InlineSVGConfig,
            HttpClient,
            HttpBackend,
            RendererFactory2])
    ], SVGCacheService);
SVGCacheService.ɵfac = function SVGCacheService_Factory(t) { return new (t || SVGCacheService)(ɵngcc0.ɵɵinject(APP_BASE_HREF, 8), ɵngcc0.ɵɵinject(ɵngcc1.PlatformLocation, 8), ɵngcc0.ɵɵinject(ɵngcc2.InlineSVGConfig, 8), ɵngcc0.ɵɵinject(ɵngcc3.HttpClient), ɵngcc0.ɵɵinject(ɵngcc3.HttpBackend), ɵngcc0.ɵɵinject(ɵngcc0.RendererFactory2)); };
SVGCacheService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: SVGCacheService, factory: function (t) { return SVGCacheService.ɵfac(t); }, providedIn: 'root' });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SVGCacheService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: String, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [APP_BASE_HREF]
            }] }, { type: ɵngcc1.PlatformLocation, decorators: [{
                type: Optional
            }] }, { type: ɵngcc2.InlineSVGConfig, decorators: [{
                type: Optional
            }] }, { type: ɵngcc3.HttpClient }, { type: ɵngcc3.HttpBackend }, { type: ɵngcc0.RendererFactory2 }]; }, null); })();
    return SVGCacheService;
}());
export { SVGCacheService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ZnLWNhY2hlLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbInN2Zy1jYWNoZS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFJTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O2dJQUF3QjtBQUN4QjtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG52YXIgX19tZXRhZGF0YSA9ICh0aGlzICYmIHRoaXMuX19tZXRhZGF0YSkgfHwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoaywgdik7XG59O1xudmFyIF9fcGFyYW0gPSAodGhpcyAmJiB0aGlzLl9fcGFyYW0pIHx8IGZ1bmN0aW9uIChwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cbn07XG5pbXBvcnQgeyBBUFBfQkFTRV9IUkVGLCBQbGF0Zm9ybUxvY2F0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEh0dHBCYWNrZW5kLCBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCwgUmVuZGVyZXJGYWN0b3J5MiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGZpbmFsaXplLCBtYXAsIHNoYXJlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgSW5saW5lU1ZHQ29uZmlnIH0gZnJvbSAnLi9pbmxpbmUtc3ZnLmNvbmZpZyc7XG5pbXBvcnQgKiBhcyBpMCBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0ICogYXMgaTEgZnJvbSBcIkBhbmd1bGFyL2NvbW1vblwiO1xuaW1wb3J0ICogYXMgaTIgZnJvbSBcIi4vaW5saW5lLXN2Zy5jb25maWdcIjtcbmltcG9ydCAqIGFzIGkzIGZyb20gXCJAYW5ndWxhci9jb21tb24vaHR0cFwiO1xudmFyIFNWR0NhY2hlU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU1ZHQ2FjaGVTZXJ2aWNlKF9hcHBCYXNlLCBfbG9jYXRpb24sIF9jb25maWcsIGh0dHBDbGllbnQsIGh0dHBCYWNrZW5kLCByZW5kZXJlckZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5fYXBwQmFzZSA9IF9hcHBCYXNlO1xuICAgICAgICB0aGlzLl9sb2NhdGlvbiA9IF9sb2NhdGlvbjtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gX2NvbmZpZztcbiAgICAgICAgdGhpcy5faHR0cCA9IF9jb25maWcgJiYgIV9jb25maWcuYnlwYXNzSHR0cENsaWVudEludGVyY2VwdG9yQ2hhaW5cbiAgICAgICAgICAgID8gaHR0cENsaWVudFxuICAgICAgICAgICAgOiBuZXcgSHR0cENsaWVudChodHRwQmFja2VuZCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXJGYWN0b3J5LmNyZWF0ZVJlbmRlcmVyKG51bGwsIG51bGwpO1xuICAgICAgICB0aGlzLnNldEJhc2VVcmwoKTtcbiAgICAgICAgaWYgKCFTVkdDYWNoZVNlcnZpY2VfMS5fY2FjaGUpIHtcbiAgICAgICAgICAgIFNWR0NhY2hlU2VydmljZV8xLl9jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIVNWR0NhY2hlU2VydmljZV8xLl9pblByb2dyZXNzUmVxcykge1xuICAgICAgICAgICAgU1ZHQ2FjaGVTZXJ2aWNlXzEuX2luUHJvZ3Jlc3NSZXFzID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFNWR0NhY2hlU2VydmljZV8xID0gU1ZHQ2FjaGVTZXJ2aWNlO1xuICAgIFNWR0NhY2hlU2VydmljZS5wcm90b3R5cGUuZ2V0U1ZHID0gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZVNWR1VybCwgY2FjaGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGNhY2hlID09PSB2b2lkIDApIHsgY2FjaGUgPSB0cnVlOyB9XG4gICAgICAgIHZhciBzdmdVcmwgPSAocmVzb2x2ZVNWR1VybFxuICAgICAgICAgICAgPyB0aGlzLmdldEFic29sdXRlVXJsKHVybClcbiAgICAgICAgICAgIDogdXJsKS5yZXBsYWNlKC8jLiskLywgJycpO1xuICAgICAgICBpZiAoY2FjaGUgJiYgU1ZHQ2FjaGVTZXJ2aWNlXzEuX2NhY2hlLmhhcyhzdmdVcmwpKSB7XG4gICAgICAgICAgICByZXR1cm4gb2YodGhpcy5fY2xvbmVTVkcoU1ZHQ2FjaGVTZXJ2aWNlXzEuX2NhY2hlLmdldChzdmdVcmwpKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFNWR0NhY2hlU2VydmljZV8xLl9pblByb2dyZXNzUmVxcy5oYXMoc3ZnVXJsKSkge1xuICAgICAgICAgICAgcmV0dXJuIFNWR0NhY2hlU2VydmljZV8xLl9pblByb2dyZXNzUmVxcy5nZXQoc3ZnVXJsKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVxID0gdGhpcy5faHR0cC5nZXQoc3ZnVXJsLCB7IHJlc3BvbnNlVHlwZTogJ3RleHQnIH0pXG4gICAgICAgICAgICAucGlwZShmaW5hbGl6ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBTVkdDYWNoZVNlcnZpY2VfMS5faW5Qcm9ncmVzc1JlcXMuZGVsZXRlKHN2Z1VybCk7XG4gICAgICAgIH0pLCBzaGFyZSgpLCBtYXAoZnVuY3Rpb24gKHN2Z1RleHQpIHtcbiAgICAgICAgICAgIHZhciBzdmdFbCA9IF90aGlzLl9zdmdFbGVtZW50RnJvbVN0cmluZyhzdmdUZXh0KTtcbiAgICAgICAgICAgIFNWR0NhY2hlU2VydmljZV8xLl9jYWNoZS5zZXQoc3ZnVXJsLCBzdmdFbCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX2Nsb25lU1ZHKHN2Z0VsKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBTVkdDYWNoZVNlcnZpY2VfMS5faW5Qcm9ncmVzc1JlcXMuc2V0KHN2Z1VybCwgcmVxKTtcbiAgICAgICAgcmV0dXJuIHJlcTtcbiAgICB9O1xuICAgIFNWR0NhY2hlU2VydmljZS5wcm90b3R5cGUuc2V0QmFzZVVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5fYmFzZVVybCA9IHRoaXMuX2NvbmZpZy5iYXNlVXJsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2FwcEJhc2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VVcmwgPSB0aGlzLl9hcHBCYXNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2xvY2F0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9iYXNlVXJsID0gdGhpcy5fbG9jYXRpb24uZ2V0QmFzZUhyZWZGcm9tRE9NKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNWR0NhY2hlU2VydmljZS5wcm90b3R5cGUuZ2V0QWJzb2x1dGVVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIGlmICh0aGlzLl9iYXNlVXJsICYmICEvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KHVybCkpIHtcbiAgICAgICAgICAgIHVybCA9IHRoaXMuX2Jhc2VVcmwgKyB1cmw7XG4gICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBiYXNlID0gdGhpcy5fcmVuZGVyZXIuY3JlYXRlRWxlbWVudCgnQkFTRScpO1xuICAgICAgICBiYXNlLmhyZWYgPSB1cmw7XG4gICAgICAgIHJldHVybiBiYXNlLmhyZWY7XG4gICAgfTtcbiAgICBTVkdDYWNoZVNlcnZpY2UucHJvdG90eXBlLl9zdmdFbGVtZW50RnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgdmFyIGRpdiA9IHRoaXMuX3JlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgICAgICBkaXYuaW5uZXJIVE1MID0gc3RyO1xuICAgICAgICB2YXIgc3ZnID0gZGl2LnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgICAgICBpZiAoIXN2Zykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBTVkcgZm91bmQgaW4gbG9hZGVkIGNvbnRlbnRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN2ZztcbiAgICB9O1xuICAgIFNWR0NhY2hlU2VydmljZS5wcm90b3R5cGUuX2Nsb25lU1ZHID0gZnVuY3Rpb24gKHN2Zykge1xuICAgICAgICByZXR1cm4gc3ZnLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9O1xuICAgIHZhciBTVkdDYWNoZVNlcnZpY2VfMTtcbiAgICBTVkdDYWNoZVNlcnZpY2UubmdJbmplY3RhYmxlRGVmID0gaTAuybXJtWRlZmluZUluamVjdGFibGUoeyBmYWN0b3J5OiBmdW5jdGlvbiBTVkdDYWNoZVNlcnZpY2VfRmFjdG9yeSgpIHsgcmV0dXJuIG5ldyBTVkdDYWNoZVNlcnZpY2UoaTAuybXJtWluamVjdChpMS5BUFBfQkFTRV9IUkVGLCA4KSwgaTAuybXJtWluamVjdChpMS5QbGF0Zm9ybUxvY2F0aW9uLCA4KSwgaTAuybXJtWluamVjdChpMi5JbmxpbmVTVkdDb25maWcsIDgpLCBpMC7Jtcm1aW5qZWN0KGkzLkh0dHBDbGllbnQpLCBpMC7Jtcm1aW5qZWN0KGkzLkh0dHBCYWNrZW5kKSwgaTAuybXJtWluamVjdChpMC5SZW5kZXJlckZhY3RvcnkyKSk7IH0sIHRva2VuOiBTVkdDYWNoZVNlcnZpY2UsIHByb3ZpZGVkSW46IFwicm9vdFwiIH0pO1xuICAgIFNWR0NhY2hlU2VydmljZSA9IFNWR0NhY2hlU2VydmljZV8xID0gX19kZWNvcmF0ZShbXG4gICAgICAgIEluamVjdGFibGUoe1xuICAgICAgICAgICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG4gICAgICAgIH0pLFxuICAgICAgICBfX3BhcmFtKDAsIE9wdGlvbmFsKCkpLCBfX3BhcmFtKDAsIEluamVjdChBUFBfQkFTRV9IUkVGKSksXG4gICAgICAgIF9fcGFyYW0oMSwgT3B0aW9uYWwoKSksXG4gICAgICAgIF9fcGFyYW0oMiwgT3B0aW9uYWwoKSksXG4gICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbU3RyaW5nLCBQbGF0Zm9ybUxvY2F0aW9uLFxuICAgICAgICAgICAgSW5saW5lU1ZHQ29uZmlnLFxuICAgICAgICAgICAgSHR0cENsaWVudCxcbiAgICAgICAgICAgIEh0dHBCYWNrZW5kLFxuICAgICAgICAgICAgUmVuZGVyZXJGYWN0b3J5Ml0pXG4gICAgXSwgU1ZHQ2FjaGVTZXJ2aWNlKTtcbiAgICByZXR1cm4gU1ZHQ2FjaGVTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFNWR0NhY2hlU2VydmljZSB9O1xuIl19